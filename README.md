# 気象データ可視化アプリケーション

気象庁のアメダスデータを使用して、日本全国の観測所の今日の気温・気圧変化をリアルタイムで表示するWebアプリケーションです。

## 機能

- **観測所選択**: 全国947箇所の気象観測所から選択可能
- **気温表示**: 今日の0時から現在時刻までの気温変化を線グラフで表示
- **気圧表示**: 今日の0時から現在時刻までの気圧変化を線グラフで表示
- **リアルタイムデータ**: 気象庁の最新データを取得
- **高速切り替え**: キャッシュ機能により観測所切り替え時の即座表示
- **プログレス表示**: データ取得の進捗状況をリアルタイム表示

## デモ

ブラウザで`index.html`を開き、観測所を選択して「気象データを取得」ボタンをクリックしてください。

## 技術仕様

### アーキテクチャ

- **フロントエンドのみ**: HTML + JavaScript（ES6）
- **チャートライブラリ**: Chart.js（CDN）
- **データソース**: 気象庁アメダスAPI

### データソース

- **API**: `https://www.jma.go.jp/bosai/amedas/data/map/{YYYYMMDDHHMISS}.json`
- **更新間隔**: 10分
- **対象観測所**: 四要素観測所・官署（気温データあり）

### パフォーマンス最適化

- **キャッシュシステム**: TTL（10分）+ setTimeout方式
- **バッチ取得**: 24時間分のデータを並列取得
- **API効率化**: 現在時刻までのデータのみ取得（未来の時刻は除外）

## ファイル構成

```text
├── index.html              # メインHTMLファイル
├── script.js               # JavaScriptアプリケーション
├── ame_master_20250313.csv # 観測所マスターデータ
├── CLAUDE.md               # 開発ガイド
└── README.md               # このファイル
```

## 開発環境

### 必要条件

- モダンWebブラウザ（ES6対応）
- ローカルWebサーバー（CORS対応）

### セットアップ

```bash
# リポジトリをクローン
git clone <repository-url>
cd todaytemperature

# ローカルサーバーを起動（例）
python -m http.server 8000
# または
npx serve .

# ブラウザでアクセス
open http://localhost:8000
```

### ビルドプロセス

ビルドプロセスは不要です。静的ファイルをブラウザで直接実行できます。

## API仕様

### 気象庁アメダスAPI

```text
GET https://www.jma.go.jp/bosai/amedas/data/map/{timestamp}.json
```

**パラメータ:**

- `timestamp`: `YYYYMMDDHHMISS`形式（例: `20250627140000`）

**レスポンス例:**

```json
{
  "48361": {
    "temp": [26.7, 0],
    "pressure": [938.1, 0]
  }
}
```

## 主要クラス

### WeatherDataCache

- TTL（Time To Live）ベースのキャッシュシステム
- 10分間の自動無効化
- メモリ効率的な管理

### WeatherApp

- アプリケーション全体のライフサイクル管理
- 観測所データの読み込み・管理
- チャート表示・更新処理

## ブラウザサポート

- Chrome 60+
- Firefox 60+
- Safari 12+
- Edge 79+

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## データ提供

気象データは気象庁より提供されています。

- [気象庁ホームページ](https://www.jma.go.jp/)
- [アメダス](https://www.jma.go.jp/jma/kishou/know/amedas/ame_master.pdf)

## 貢献

バグ報告や機能要求は、GitHubのIssueでお知らせください。

## 更新履歴

- v1.0.0: 基本的な気温表示機能
- v1.1.0: 気圧表示機能追加
- v1.2.0: 観測所選択機能追加
- v1.3.0: キャッシュシステムと最適化
- v1.4.0: 現在時刻までのデータ取得最適化
- v1.5.0: 気温データのない観測所除外
